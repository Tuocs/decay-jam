[gd_scene load_steps=18 format=4 uid="uid://c611xvguj2e7j"]

[ext_resource type="Script" uid="uid://fahp3vnmyc1w" path="res://Scripts/zombie_manager.gd" id="1_iqcmb"]
[ext_resource type="Script" uid="uid://nmvdv5u3u4g4" path="res://Scripts/level_manager.gd" id="1_jeepb"]
[ext_resource type="TileSet" uid="uid://cbrabpodamhjx" path="res://Assets/new_tile_set.tres" id="2_voj1p"]
[ext_resource type="PackedScene" uid="uid://bykdnwvkytgjg" path="res://Prefabs/zombie.tscn" id="2_y1yrn"]
[ext_resource type="PackedScene" uid="uid://hwnnvne8jo3l" path="res://Prefabs/level_finish_ui.tscn" id="4_8x8nf"]
[ext_resource type="PackedScene" uid="uid://be2jk8a1ea588" path="res://Prefabs/Light.tscn" id="6_kxr0u"]
[ext_resource type="PackedScene" uid="uid://b4kq2pn00ebl2" path="res://Prefabs/Guard.tscn" id="6_voj1p"]
[ext_resource type="PackedScene" uid="uid://csia7epgxbj3q" path="res://Prefabs/pause_ui.tscn" id="7_kxr0u"]
[ext_resource type="PackedScene" uid="uid://sw3csouqhjob" path="res://Prefabs/light_switch_right.tscn" id="9_8x8nf"]
[ext_resource type="Script" uid="uid://6ar2cytybiyn" path="res://Scripts/light.gd" id="9_ijb51"]
[ext_resource type="Texture2D" uid="uid://dteaycdh4pvt8" path="res://Assets/wall_tiles.png" id="10_76fkc"]
[ext_resource type="PackedScene" uid="uid://bplof3hhec7kj" path="res://Prefabs/light_switch_down.tscn" id="10_ej1bv"]
[ext_resource type="Texture2D" uid="uid://c3ca2fj7upual" path="res://Assets/light_mask.png" id="11_jfium"]
[ext_resource type="Texture2D" uid="uid://b0d55fa1gldmq" path="res://Assets/light.png" id="12_wenv2"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kxr0u"]
size = Vector2(55.5, 20)

[sub_resource type="CircleShape2D" id="CircleShape2D_ijb51"]
radius = 64.0

[sub_resource type="NavigationPolygon" id="NavigationPolygon_ej1bv"]
vertices = PackedVector2Array(267, 187, 149, 187, 149, 155, 229, 133, 91, 155, 91, 187, 21, 187, 21, 43, 43, 69, 5, 43, 5, 21, 91, 21, 91, 43, 43, 43, 91, 69, 91, 133, 267, 37, 229, 107, 155, 37, 133, 107, 133, 5, 155, 5)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 5, 6, 7, 8), PackedInt32Array(7, 9, 10, 11), PackedInt32Array(11, 12, 13), PackedInt32Array(7, 11, 13), PackedInt32Array(7, 13, 8), PackedInt32Array(8, 14, 15), PackedInt32Array(4, 8, 15), PackedInt32Array(2, 4, 15, 3), PackedInt32Array(16, 0, 3, 17), PackedInt32Array(18, 16, 17, 19), PackedInt32Array(18, 19, 20, 21)])
outlines = Array[PackedVector2Array]([PackedVector2Array(0, 0, 0, 192, 288, 192, 288, 0)])
agent_radius = 5.0

[node name="Level" type="Node2D" node_paths=PackedStringArray("level_finish_ui")]
script = ExtResource("1_jeepb")
level_finish_ui = NodePath("UI/Camera2D/Level Finish UI")

[node name="UI" type="CanvasLayer" parent="."]
layer = 999
follow_viewport_enabled = true

[node name="Camera2D" type="Camera2D" parent="UI"]
position = Vector2(152, 94)
zoom = Vector2(4, 4)

[node name="PauseUI" parent="UI/Camera2D" instance=ExtResource("7_kxr0u")]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
scale = Vector2(0.5, 0.5)

[node name="Level Finish UI" parent="UI/Camera2D" instance=ExtResource("4_8x8nf")]
visible = false
scale = Vector2(0.5, 0.5)

[node name="LevelFinishZone" type="Area2D" parent="UI"]
position = Vector2(145, 7)

[node name="CollisionShape2D" type="CollisionShape2D" parent="UI/LevelFinishZone"]
shape = SubResource("RectangleShape2D_kxr0u")

[node name="GroundCanvasLayer" type="CanvasLayer" parent="."]
layer = 0
follow_viewport_enabled = true

[node name="CanvasModulate" type="CanvasModulate" parent="GroundCanvasLayer"]
color = Color(0.18538326, 0.18538326, 0.18538326, 1)

[node name="GroundTilemap" type="TileMapLayer" parent="GroundCanvasLayer"]
texture_filter = 1
tile_map_data = PackedByteArray("AAAAAAEAAAABAAEAAAAAAAIAAAACAAAAAAAQAAQAAAAAAAEAAAAQAAMAAAACAAAAAAAQAAIAAAAAAAEAAAAJAAAAAAAAAAEAAAAIAAAAAAAAAAEAAAABAAEAAAAAAAAAAAABAAIAAAAAAAAAAAACAAEAAAABAAAAAAADAAEAAAACAAAAAAAEAAEAAAAAAAAAAAAIAAEAAAABAAAAAAAJAAEAAAAAAAAAAAAPAAIAAAAAAAAAAAAOAAIAAAAAAAAAAAANAAIAAAABAAAAAAAMAAIAAAAAAAEAAAALAAIAAAABAAAAAAAKAAIAAAABAAAAAAAJAAIAAAACAAAAAAAIAAIAAAAAAAAAAAAEAAIAAAAAAAAAAAADAAIAAAABAAAAAAACAAIAAAABAAAAAAABAAMAAAACAAAAAAACAAMAAAAAAAEAAAAIAAMAAAABAAEAAAAJAAMAAAAAAAEAAAAKAAMAAAAAAAEAAAALAAMAAAABAAEAAAAMAAMAAAAAAAAAAAANAAMAAAAAAAEAAAAOAAMAAAAAAAAAAAAPAAMAAAAAAAAAAAAPAAQAAAABAAEAAAAOAAQAAAABAAAAAAANAAQAAAAAAAEAAAAMAAQAAAACAAAAAAALAAQAAAACAAAAAAAKAAQAAAACAAAAAAAJAAQAAAAAAAAAAAAIAAQAAAABAAEAAAAEAAQAAAABAAEAAAADAAQAAAAAAAEAAAACAAQAAAAAAAAAAAABAAQAAAACAAAAAAABAAUAAAAAAAAAAAABAAYAAAABAAEAAAACAAYAAAAAAAAAAAACAAUAAAAAAAEAAAADAAUAAAACAAAAAAAEAAUAAAABAAAAAAANAAUAAAABAAAAAAAOAAUAAAABAAAAAAAPAAUAAAABAAEAAAAQAAUAAAACAAAAAAAQAAYAAAABAAAAAAAPAAYAAAACAAAAAAAOAAYAAAAAAAEAAAANAAYAAAAAAAAAAAAMAAYAAAABAAEAAAALAAYAAAAAAAAAAAAKAAYAAAAAAAEAAAAJAAYAAAACAAAAAAAIAAYAAAACAAAAAAAFAAYAAAABAAEAAAAEAAYAAAACAAAAAAADAAYAAAABAAEAAAACAAcAAAAAAAEAAAABAAcAAAAAAAAAAAADAAcAAAAAAAEAAAAEAAcAAAAAAAEAAAAFAAcAAAABAAEAAAAOAAcAAAAAAAAAAAAPAAcAAAAAAAAAAAAQAAcAAAABAAEAAAAQAAgAAAACAAAAAAAPAAgAAAAAAAAAAAAOAAgAAAABAAEAAAANAAgAAAAAAAEAAAAMAAgAAAAAAAEAAAALAAgAAAAAAAAAAAAKAAgAAAABAAAAAAAJAAgAAAAAAAEAAAAIAAgAAAAAAAAAAAAHAAgAAAACAAAAAAAGAAgAAAAAAAEAAAAFAAgAAAABAAAAAAAEAAgAAAAAAAAAAAADAAgAAAAAAAEAAAACAAgAAAABAAAAAAABAAgAAAABAAEAAAABAAkAAAABAAAAAAACAAkAAAAAAAAAAAADAAkAAAABAAEAAAAEAAkAAAAAAAEAAAAFAAkAAAAAAAEAAAAJAAkAAAABAAAAAAAKAAkAAAACAAAAAAALAAkAAAAAAAEAAAAMAAkAAAAAAAAAAAANAAkAAAACAAAAAAAOAAkAAAABAAEAAAAPAAkAAAAAAAEAAAAQAAkAAAAAAAEAAAAQAAoAAAAAAAAAAAAPAAoAAAABAAAAAAAOAAoAAAABAAEAAAANAAoAAAAAAAAAAAAMAAoAAAAAAAEAAAALAAoAAAAAAAAAAAAKAAoAAAAAAAEAAAAJAAoAAAAAAAEAAAAFAAoAAAABAAEAAAAEAAoAAAABAAEAAAADAAoAAAAAAAAAAAACAAoAAAACAAAAAAABAAoAAAACAAAAAAD//wEAAAAAAAEAAAD//wIAAAACAAAAAAAJAP3/AAACAAAAAAAIAP7/AAABAAAAAAAJAPz/AAABAAAAAAAJAP//AAAAAAEAAAAIAP//AAABAAEAAAAIAP3/AAAAAAAAAAAJAP7/AAAAAAEAAAAIAPz/AAAAAAEAAAAKAAUAAAACAAAAAAALAAUAAAABAAAAAAAIAAUAAAABAAAAAAAMAAUAAAABAAEAAAAJAAUAAAAAAAEAAAAKAAsAAAAAAAEAAAAMAAsAAAAAAAEAAAANAAsAAAAAAAEAAAAPAAsAAAAAAAEAAAAQAAsAAAABAAAAAAALAAsAAAACAAAAAAAJAAsAAAABAAEAAAAOAAsAAAACAAAAAAAGAAkAAAACAAAAAAAIAAkAAAABAAAAAAAHAAkAAAAAAAEAAAADAAsAAAAAAAEAAAABAAsAAAAAAAEAAAACAAsAAAABAAEAAAAFAAsAAAACAAAAAAAEAAsAAAABAAAAAAAFAAQAAAAAAAEAAAAFAAUAAAABAAAAAAAFAAEAAAABAAAAAAAFAAIAAAACAAAAAAA=")
tile_set = ExtResource("2_voj1p")

[node name="ObjectsCanvasLayer" type="CanvasLayer" parent="."]
follow_viewport_enabled = true

[node name="ZombieManager" type="Node2D" parent="ObjectsCanvasLayer"]
script = ExtResource("1_iqcmb")

[node name="Guard" parent="ObjectsCanvasLayer/ZombieManager" node_paths=PackedStringArray("my_tuple_dict") instance=ExtResource("6_voj1p")]
position = Vector2(146, 143)
collision_mask = 1
motion_mode = 0
wall_min_slide_angle = 0.2617994
my_tuple_dict = {
NodePath("../../PathNodes/Node2D3"): 3,
NodePath("../../PathNodes/Node2D4"): 2
}

[node name="Guard2" parent="ObjectsCanvasLayer/ZombieManager" node_paths=PackedStringArray("my_tuple_dict") instance=ExtResource("6_voj1p")]
position = Vector2(78, 85)
collision_mask = 1
motion_mode = 0
wall_min_slide_angle = 0.2617994
my_tuple_dict = {
NodePath("../../PathNodes/Node2D5"): 5,
NodePath("../../PathNodes/Node2D6"): 5
}

[node name="Guard3" parent="ObjectsCanvasLayer/ZombieManager" node_paths=PackedStringArray("my_tuple_dict") instance=ExtResource("6_voj1p")]
position = Vector2(203, 83)
collision_mask = 1
motion_mode = 0
wall_min_slide_angle = 0.2617994
my_tuple_dict = {
NodePath("../../PathNodes/Node2D"): 4,
NodePath("../../PathNodes/Node2D2"): 3
}

[node name="Zombie" parent="ObjectsCanvasLayer/ZombieManager" instance=ExtResource("2_y1yrn")]
position = Vector2(0, 31)
collision_mask = 1
motion_mode = 0
wall_min_slide_angle = 0.2617994

[node name="PathNodes" type="Node2D" parent="ObjectsCanvasLayer"]

[node name="Node2D" type="Node2D" parent="ObjectsCanvasLayer/PathNodes"]
position = Vector2(233, 88)

[node name="Node2D2" type="Node2D" parent="ObjectsCanvasLayer/PathNodes"]
position = Vector2(171, 88)

[node name="Node2D3" type="Node2D" parent="ObjectsCanvasLayer/PathNodes"]
position = Vector2(201, 152)

[node name="Node2D4" type="Node2D" parent="ObjectsCanvasLayer/PathNodes"]
position = Vector2(143, 152)

[node name="Node2D5" type="Node2D" parent="ObjectsCanvasLayer/PathNodes"]
position = Vector2(79, 88)

[node name="Node2D6" type="Node2D" parent="ObjectsCanvasLayer/PathNodes"]
position = Vector2(58, 89)

[node name="Light" parent="ObjectsCanvasLayer" instance=ExtResource("6_kxr0u")]
position = Vector2(56, 146)

[node name="Light2" type="Node2D" parent="ObjectsCanvasLayer" node_paths=PackedStringArray("areaColl", "pointLight")]
position = Vector2(209, 160)
script = ExtResource("9_ijb51")
areaColl = NodePath("Area2D")
pointLight = NodePath("PointLight2D")

[node name="Sprite2D" type="Sprite2D" parent="ObjectsCanvasLayer/Light2"]
visible = false
scale = Vector2(9, 9)
texture = ExtResource("10_76fkc")

[node name="PointLight2D" type="PointLight2D" parent="ObjectsCanvasLayer/Light2"]
rotation = 1.5707964
energy = 2.0
shadow_enabled = true
texture = ExtResource("11_jfium")
texture_scale = 1.6

[node name="Sprite" type="Sprite2D" parent="ObjectsCanvasLayer/Light2"]
light_mask = 0
texture = ExtResource("12_wenv2")

[node name="Area2D" type="Area2D" parent="ObjectsCanvasLayer/Light2"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="ObjectsCanvasLayer/Light2/Area2D"]
shape = SubResource("CircleShape2D_ijb51")

[node name="Light3" parent="ObjectsCanvasLayer" instance=ExtResource("6_kxr0u")]
position = Vector2(168, 72)

[node name="LightSwitch" parent="ObjectsCanvasLayer" node_paths=PackedStringArray("light") instance=ExtResource("9_8x8nf")]
position = Vector2(95, 87)
light = NodePath("../Light")

[node name="LightSwitch2" parent="ObjectsCanvasLayer" node_paths=PackedStringArray("light") instance=ExtResource("10_ej1bv")]
position = Vector2(168, 191)
light = NodePath("../Light2")

[node name="LightSwitch3" parent="ObjectsCanvasLayer" node_paths=PackedStringArray("light") instance=ExtResource("9_8x8nf")]
position = Vector2(271, 55)
light = NodePath("../Light3")

[node name="WallsCanvasLayer" type="CanvasLayer" parent="."]
layer = 0
follow_viewport_enabled = true

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="WallsCanvasLayer"]
navigation_polygon = SubResource("NavigationPolygon_ej1bv")

[node name="WallsTilemap" type="TileMapLayer" parent="WallsCanvasLayer/NavigationRegion2D"]
light_mask = 2
texture_filter = 1
tile_map_data = PackedByteArray("AAAAAAAAAQAEAAEAAAABAAAAAQAEAAEAAAAKAAAAAQAAAAIAAAALAAAAAQACAAAAAAAMAAAAAQABAAAAAAANAAAAAQABAAAAAAAOAAAAAQACAAAAAAAPAAAAAQABAAAAAAAQAAAAAQACAAAAAAARAAAAAQACAAAAAAAKAAEAAQAAAAMAAAALAAEAAQABAAMAAAAMAAEAAQABAAMAAAAOAAEAAQABAAMAAAAQAAEAAQABAAMAAAARAAIAAQAAAAIAAAARAAEAAQAHAAEAAAANAAEAAQACAAMAAAAPAAEAAQACAAMAAAARAAMAAQAAAAEAAAAAAAUAAQADAAEAAAAAAAYAAQADAAEAAAAAAAcAAQADAAIAAAAAAAgAAQADAAEAAAAAAAkAAQADAAEAAAAAAAoAAQADAAEAAAAAAAsAAQADAAIAAAAAAAwAAQAFAAIAAAABAAwAAQAFAAEAAAACAAwAAQAEAAEAAAADAAwAAQAFAAEAAAAEAAwAAQAEAAEAAAAFAAwAAQAFAAEAAAAGAAsAAQAAAAEAAAAGAAwAAQABAAMAAAAHAAsAAQABAAIAAAAHAAwAAQACAAMAAAAKAAwAAQAFAAEAAAALAAwAAQAFAAEAAAAMAAwAAQAEAAEAAAANAAwAAQAFAAEAAAAOAAwAAQAEAAEAAAAPAAwAAQAFAAEAAAAQAAwAAQAFAAEAAAARAAUAAQAAAAEAAAARAAYAAQAAAAEAAAARAAcAAQAAAAEAAAARAAgAAQAAAAIAAAARAAkAAQAAAAEAAAARAAoAAQAAAAEAAAARAAsAAQAAAAEAAAARAAwAAQAEAAIAAAAAAAMAAQADAAAAAAAAAAQAAQADAAIAAAARAAQAAQAAAAIAAAADAAAAAQAEAAEAAAADAAMAAQAEAAAAAAAEAAAAAQAEAAEAAAAEAAMAAQAFAAEAAAAFAAAAAQAEAAEAAAAFAAMAAQAEAAEAAAAGAAAAAQAFAAMAAAAGAAEAAQAAAAEAAAAGAAIAAQAAAAEAAAAGAAMAAQABAAIAAAAGAAYAAQAAAAEAAAAGAAcAAQAAAAMAAAAHAAcAAQAFAAIAAAAIAAcAAQAFAAEAAAAJAAcAAQAEAAEAAAAKAAcAAQAFAAEAAAALAAcAAQAEAAEAAAAMAAcAAQAFAAEAAAAGAAQAAQAAAAIAAAAGAAUAAQAAAAEAAAAHAAAAAQADAAIAAAAHAAEAAQADAAEAAAAHAAIAAQADAAIAAAAHAAMAAQADAAEAAAAHAAYAAQADAAIAAAANAAcAAQAFAAAAAAACAAAAAQAFAAEAAAAHAAQAAQADAAEAAAAHAAUAAQADAAEAAAAHAP3/AQADAAEAAAAHAP7/AQADAAEAAAAHAP//AQADAAEAAAAKAPz/AQAAAAIAAAAKAP3/AQAAAAEAAAAKAP7/AQAAAAEAAAAKAP//AQAAAAEAAAAHAPz/AQADAAIAAAAHAAoAAQABAAAAAAAGAAoAAQAAAAAAAAAJAAwAAQAEAAEAAAAIAAwAAQABAAMAAAAIAAsAAQADAAIAAAAIAAoAAQADAAAAAAD//wAAAQAEAAEAAAD+/wMAAQAFAAIAAAD+/wIAAQADAAEAAAD+/wEAAQADAAIAAAD+/wAAAQAEAAMAAAD//wMAAQAFAAEAAAA=")
tile_set = ExtResource("2_voj1p")

[connection signal="area_entered" from="UI/LevelFinishZone" to="." method="_on_area_2d_area_entered"]
[connection signal="body_entered" from="UI/LevelFinishZone" to="." method="_on_area_2d_body_entered"]
[connection signal="area_entered" from="ObjectsCanvasLayer/Light2/Area2D" to="ObjectsCanvasLayer/Light2" method="_on_area_2d_area_entered"]
[connection signal="area_exited" from="ObjectsCanvasLayer/Light2/Area2D" to="ObjectsCanvasLayer/Light2" method="_on_area_2d_area_exited"]
